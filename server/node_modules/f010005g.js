/*eslint no-console: 0, "quotes": [0, "single"], module: 0, globals:[0, "obj"]*/
/*eslint no-unused-vars: ["error", { "args": "none" }]*/
/**
 "f010005g": {
			"title": "Пользователи",
			"info": "Получить список пользователей со всеми реквизитами",
			"example body": {},
			"example return": {}
		}
 */
'use strict';
exports.fun = function (client, obj, db) {
	return new Promise(function (resolve, reject) {
		if (!(client.idToken)) {
			resolve({ "result": false });
			return;
		}
		//console.log(obj, client);
		db.query(`SELECT 
		u_id as u_id,
		u_login,
		u_pass,
		p_id,
		u_permission,
		extract(epoch from u_mtime)::integer as u_mtime
	FROM trade.users;`, [obj.token, client.idToken]).then(
			(value) => {
				resolve({ "data": value });
			});
	});
};