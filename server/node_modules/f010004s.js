/*eslint no-console: 0, "quotes": [0, "single"], module: 0, globals:[0, "obj"]*/
/*eslint no-unused-vars: ["error", { "args": "none" }]*/
// "f010004s": {
// 	"title": "Подтверждение получения данных",
// 	"info": "Функция выполняется после окончания любой загрузки данных"
// }
'use strict';
exports.fun = function (client, obj, db) {
	return new Promise(function (resolve, reject) {
		if (!(client.idToken)) {
			resolve({ "result": false });
			return;
		}
		console.log(obj);
		db.query(`UPDATE trade.sync_token st SET
				st_result = $1,
				st_etime = now()
				WHERE (st.st_id=$2) AND(st.st_table=$3)`, [obj.result, obj.id, obj.name]).then(
			(value) => {
				resolve({});
			});

	});
};