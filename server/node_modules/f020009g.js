/*eslint no-console: 0, "quotes": [0, "single"], module: 0, globals:[0, "obj"]*/
/*eslint no-unused-vars: ["error", { "args": "none" }]*/
/**"f020009g": {
            "title": "Связь номенклатуры и групп",
            "info": "Мобильный клиент получает связи номенклатуры и групп"
        }, */
'use strict';
exports.fun = function (client, obj, db) {
	return new Promise(function (resolve, reject) {
		if (!(client.idToken)) {
			resolve({ "result": false });
			return;
		}
		if (obj.fullsync === true) {
			db.query(`SELECT
					lig_id,
					i_id,
					ig_id,
					igt_id,
					lig_active,
					extract(epoch from lig_mtime)::integer as lig_mtime
				from trade.link_Item_Group`, {})
				.then((value) => {
					resolve({ "data": value });
				});
		} else {
			resolve([{ "error": "Пока не добавленна частичная синхронизация" }]);
		}
	});
};