/*eslint no-console: 0, "quotes": [0, "single"], module: 0, globals:[0, "obj"]*/
/*eslint no-unused-vars: ["error", { "args": "none" }]*/
/*"f020005s": {
            "title": "Звонки",
            "info": "Мобильный клиент отправляет на сервер информацию о звонках"
        }, */
'use strict';
exports.fun = function (client, obj, db) {
	return new Promise(function (resolve, reject) {
		if (!(client.idToken)) {
			resolve({ "result": false });
			return;
		}
		var st = "", arr = [];

		for (var i = 0; i < obj.calls.length; i++) {
			let call = obj.calls[i];
			arr.push(client.t_id);
			arr.push(call.lc_stime);
			arr.push(call.lc_billsec);
			arr.push(call.lc_phone);
			arr.push(call.lc_name);
			arr.push(call.lc_incoming);
			if (i !== 0) st = st + ",";
			st = st + "($" + (i + 1) + ", $" + (i + 2) + ", $" + (i + 3) + ",$" + (i + 4) + ",$" + (i + 5) + ",$" + (i + 6)+")";

		}
		db.query(`INSERT INTO trade.log_calls (t_id, lc_stime, lc_billsec, lc_phone, lc_name, lc_incoming) VALUES ` + st + `;`, arr).then(
			(value) => {
				resolve({});
			});

	});
};